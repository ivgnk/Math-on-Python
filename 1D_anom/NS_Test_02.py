"""
Проверка на нестационарность ряда
2. Тест Дики‑Фуллера (ADF, Augmented Dickey‑Fuller)
Суть: проверяет наличие единичного корня (unit root).
Нулевая гипотеза (H₀): ряд нестационарен (есть единичный корень).
Альтернативная (H₁): ряд стационарен.
Если p‑value < 0,05, отвергаем H₀ → ряд стационарен.

Пример (для случайного блуждания):
p‑значение > 0,05 → ряд нестационарен.
Статистика теста > критических значений → не отвергаем H₀.
"""
import numpy as np
from statsmodels.tsa.stattools import adfuller

# Пример данных (случайное блуждание — нестационарный ряд)
np.random.seed(42)
n = 1000
data = np.cumsum(np.random.randn(n))  # Интегрированный шум → нестационарность

def adf_test(series, alpha=0.05):
    result = adfuller(series)
    print('Результаты теста Дики‑Фуллера:')
    print(f'Статистика теста: {result[0]:.4f}')
    print(f'p‑значение: {result[1]:.4f}')
    print(f'Использовано задержек: {result[2]}')
    print(f'Количество наблюдений: {result[3]}')
    for key, value in result[4].items():
        print(f'Критическое значение ({key}): {value:.4f}')

    if result[1] <= alpha:
        print('→ Ряд стационарен (H₀ отвергнута)')
    else:
        print('→ Ряд нестационарен (H₀ не отвергнута)')

# Применяем к нашим данным
adf_test(data, alpha=0.05)
