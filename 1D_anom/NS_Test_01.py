"""
Проверка на нестационарность ряда
1. Визуальный анализ (графики трендов и автокорреляции)
Суть:
График временного ряда: ищем явный тренд, изменение дисперсии, сезонные пики.
ACF/PACF‑графики: длительные «хвосты» автокорреляции указывают на нестационарность.

Как интерпретировать:
Если на графике ряда виден растущий/падающий тренд или меняющаяся амплитуда — ряд нестационарен.
На ACF: медленное затухание корреляции (длинные «столбики») — признак нестационарности.
На PACF: резкий обрыв после 1–2 лагов может указывать на AR(1)‑процесс, но не гарантирует стационарность.
"""
import numpy as np
import matplotlib.pyplot as plt
from statsmodels.graphics.tsaplots import plot_acf, plot_pacf

# Пример данных (случайное блуждание — нестационарный ряд)
np.random.seed(42)
n = 1000
data = np.cumsum(np.random.randn(n))  # Интегрированный шум → нестационарность

# График временного ряда
plt.figure(figsize=(12, 4))
plt.plot(data, label='Временной ряд')
plt.title('Временной ряд (визуальная проверка)')
plt.xlabel('Время')
plt.ylabel('Значение')
plt.grid(True); plt.legend(); plt.show()

# ACF и PACF
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 4))
plot_acf(data, lags=40, ax=ax1)
plot_pacf(data, lags=40, ax=ax2)
plt.grid(True); plt.show()